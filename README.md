# Приватная интеграция SRM

**Приватной интеграцией** называется простейший вид интеграции, который устанавливается для одного аккаунта

Создание подобной интеграции заключается в следующих шагах:
1. Авторизация в системе 
2. Настройка интеграции
3. Получить ключи доступа и настроить обмен данными

**Пример реализации на php используя oAuth 2.0**

```php
<?php
class x360SimpleApi {
  private $auth = [
    'username' => '',
    'client_id' => '',
    'client_secret' => '',
    'grant_type' => 'authorization_code',
    'code' => '',
    'redirect_uri' => '',
  ];
?>
```

# Список доступных методов
 + [Получение списка план-графиков](#GetPlansList)
 + [Создание нового план-графика](#AddPlanList)
 + [Получение списка закупок по ID](#GetBuyPlanById)
 + [Получение перечня номенклатуры](#GetNomenclatureList)
 + [Cоздание новой версии план-графика](#CreateNewPlanVersion)

## <a name="GetPlansList"></a>	Получение списка план-графиков

### Метод  
*GET, POST /api/my/srm/pp/list*

### Описание  
*Позволяет получить список план-графиков*

### Ограничения  
*Метод доступен в соответствии с правами пользователя*

### Заголовок типа данных при успешном результате  
*Content-Type: application/hal+json*

### Заголовок типа данных при ошибке  
*Content-Type: application/problem+json*

### HTTP коды ответа  
| Код ответа | Условие |
| :------ | :------ |
| 200 | Запрос выполнен успешно |
| 401 | Пользователь не авторизован |

### Параметры ответа  
| Параметр | Тип данных | Описание |
| :------ | :------ | :------ |
| id | string |  |
| planStart | int |  |
| planEnd | int |  |
| activeVersion | string |  |

### Пример ответа

```json
[
  {
    "id": "sxid6073-1e95-438a-9ea1-7e1d007d1fa7",
    "planStart": "2018-12-31T21:00:00.000Z",
    "planEnd": "2019-12-31T21:00:00.000Z",
    "activeVersion": "sxid051f-0f2e-47ef-9978-097cdbb321f7"
  }
]
```

## <a name="AddPlanList"></a>	Создание нового план-графика

### Метод  
*POST /api/my/srm/pp/create*

### Описание  
*Позволяет создать план-график*

### Ограничения  
*Метод доступен в соответствии с правами пользователя*

### Заголовок типа данных при успешном результате  
*Content-Type: application/hal+json*

### Заголовок типа данных при ошибке  
*Content-Type: application/problem+json*

### HTTP коды ответа  
| Код ответа | Условие |
| :------ | :------ |
| 200 | Запрос выполнен успешно |
| 401 | Пользователь не авторизован |
| 400 | Некорректные данные |

### Параметры ответа  
| Параметр | Тип данных | Описание |
| :------ | :------ | :------ |
| success | boolean |  |
| result | string |  |

### Пример ответа

```json
{
  "success": true,
  "result": "sxid273f-3c0e-4959-96ff-83cf17d04dc7"
}
```

## <a name="GetBuyPlanById"></a>	Получение списка закупок по ID

### Метод  
*GET /api/my/srm/pp/{id}/active/ppp/list*

### Описание  
*Позволяет получить список закупок для активной версии выбранного плана закупок*

### Ограничения  
*Метод доступен в соответствии с правами пользователя*

### Заголовок типа данных при успешном результате  
*Content-Type: application/hal+json*

### Заголовок типа данных при ошибке  
*Content-Type: application/problem+json*

### HTTP коды ответа  
| Код ответа | Условие |
| :------ | :------ |
| 200 | Запрос выполнен успешно |
| 401 | Пользователь не авторизован |
| 204 | Неизвестный id |

### Параметры ответа  
| Параметр | Тип данных | Описание |
| :------ | :------ | :------ |
| id | string |  |
| num | int |  |
| goods | string |  |
| qty | int |  |

### Пример ответа

```json
{
  "id": "sxid0814-f3c3-4b39-b3fb-93071884010a",
  "num": "22012172",
  "goods": "sxidaf86-7f4a-4a73-bb89-6c853e0a190a",
  "qty": 45,
```

## <a name="GetNomenclatureList"></a>	Получение перечня номенклатуры

### Метод  
*GET, POST /api/my/srm/goods/list*

### Описание  
*Позволяет получить перечень номенклатуры*

### Ограничения  
*Метод доступен в соответствии с правами пользователя*

### Заголовок типа данных при успешном результате  
*Content-Type: application/hal+json*

### Заголовок типа данных при ошибке  
*Content-Type: application/problem+json*

### HTTP коды ответа  
| Код ответа | Условие |
| :------ | :------ |
| 200 | Запрос выполнен успешно |
| 401 | Пользователь не авторизован |

### Параметры ответа  
| Параметр | Тип данных | Описание |
| :------ | :------ | :------ |
|  |  |  |

### Пример ответа

```json
{

}
```
## <a name="CreateNewPlanVersion"></a>	Cоздание новой версии план-графика

### Метод  
*POST /api/my/srm/pp/{id}/newversion*

### Описание  
*Позволяет создать новую версию плана-графика*

### Ограничения  
*Метод доступен в соответствии с правами пользователя*

### Заголовок типа данных при успешном результате  
*Content-Type: application/hal+json*

### Заголовок типа данных при ошибке  
*Content-Type: application/problem+json*

### HTTP коды ответа  
| Код ответа | Условие |
| :------ | :------ |
| 200 | Запрос выполнен успешно |
| 401 | Пользователь не авторизован |
| 204 | Неизвестный id |

### Параметры ответа  
| Параметр | Тип данных | Описание |
| :------ | :------ | :------ |
| success | boolean |  |
| result[ ] | string |  |
| result[fileid] | string |  |

### Пример ответа

```json
{
  "success": true,
  "result": {
	  "fileid": "sxidcfec-e84e-4c21-abc5-ce29b53f6808"
  }
}
```

